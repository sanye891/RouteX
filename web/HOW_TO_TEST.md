# 🧪 如何测试 RouteX 核心功能

## 🎯 测试目标
验证 RouteX 的量化交易和流动性路由功能是否正常工作

---

## 📋 准备工作

### 1. 环境设置
```bash
# 确保项目已构建
npm run build

# 启动开发服务器
npm run dev
```

### 2. 钱包配置
- 🦊 安装 MetaMask
- 🌐 添加 Monad 测试网:
  - 网络名称: `Monad Testnet`
  - RPC URL: `https://testnet-rpc.monad.xyz/`
  - 链ID: `10143`
  - 货币符号: `MON`
  - 区块浏览器: `https://testnet.monadexplorer.com`

### 3. 获取测试代币
- 🪙 **MON**: 原生代币 (用于 Gas 费)
- 🪙 **测试代币**: 需要一些 WETH、USDC、DAI 进行测试

---

## 🔧 测试流程

## 第一步: 合约验证 ✅

### **打开测试面板**
1. 访问 RouteX 应用
2. 连接 MetaMask 钱包
3. 切换到 "Testing" 标签页
4. 点击 "合约验证" 子标签

### **验证合约部署**
```bash
# 验证的合约地址:
TraderAgent:       0x7267749E1Fa24Cae44e1B76Ec90F3B2f98D2C290
RouterDefense:     0x458Ec2Bc6E645ccd8f98599D6E4d942ea480ca16
CrossChainRouter:  0x22A8C0BD01f88D3461c98E9bc3399A83dDBB9Cee
AIStrategyOptimizer: 0xc6aF426FC11BFb6d46ffaB9A57c30ab5437AA09C
QuantGuardPro:     0xb10a0b0f6282024D5c3b5256CB312D06177cF4ab
```

**操作步骤:**
1. 点击 "验证所有合约"
2. 等待验证完成
3. 检查每个合约的状态:
   - ✅ **已部署**: 绿色标记，合约代码存在
   - ❌ **未部署**: 红色标记，需要检查地址

**预期结果:**
- 所有核心合约显示 "已部署" 状态
- 可以在区块浏览器中查看合约详情

---

## 第二步: 基础功能测试 ⚡

### **代币合约测试**
1. 选择 "WETH Token" 合约
2. 测试以下方法:
   ```javascript
   name()        // 应返回 "Wrapped Ether"
   symbol()      // 应返回 "WETH"
   decimals()    // 应返回 18
   totalSupply() // 应返回总供应量
   ```

### **TraderAgent 测试**
1. 选择 "TraderAgent" 合约
2. 测试方法:
   ```javascript
   getUserOrders("你的地址")  // 查看用户订单
   ```

**验证要点:**
- 方法调用成功，无错误
- 返回合理的数据格式
- 响应时间 < 5 秒

---

## 第三步: 量化交易功能测试 💹

### **A. 市价单测试**

**Web 界面测试:**
1. 进入 "Swap" 标签页
2. 配置交易:
   - 输入代币: WETH
   - 输出代币: USDC
   - 数量: 0.01 WETH
   - 滑点: 0.5%
3. 点击 "智能交换"
4. 确认 MetaMask 交易

**验证指标:**
- ✅ 交易成功执行
- ✅ 获得预期数量的 USDC
- ✅ 滑点控制在设定范围内
- ✅ Gas 费用合理 (< 0.01 MON)

### **B. 限价单测试**

**操作步骤:**
1. 进入 "Orders" 标签页
2. 创建限价单:
   - 代币对: WETH/USDC
   - 数量: 0.01 WETH
   - 目标价格: 2600 USDC
   - 有效期: 24小时
3. 提交订单
4. 查看订单状态

**验证要点:**
- ✅ 订单创建成功
- ✅ 订单状态显示 "待执行"
- ✅ 可以查询和取消订单

---

## 第四步: 流动性路由测试 🔄

### **A. 路径优化测试**

**测试不同交易对:**
```javascript
// 测试路径:
WETH → USDC  // 直接路径
WETH → DAI   // 可能需要中间代币
DAI → USDC   // 稳定币对
```

**验证方法:**
1. 在 Swap 界面选择不同代币对
2. 输入相同数量观察:
   - 预估输出数量
   - 价格影响百分比
   - 建议的交易路径

**预期结果:**
- 不同路径显示不同的预估收益
- 价格影响计算合理 (< 5%)
- 显示最优路径建议

### **B. MEV 保护测试**

**启用 MEV 保护:**
1. 在 Swap 界面启用 "MEV 保护"
2. 执行相同的交易
3. 观察交易过程

**验证要点:**
- ✅ 交易分为两个阶段 (承诺 + 揭示)
- ✅ 第一笔交易: 提交承诺
- ✅ 第二笔交易: 揭示并执行
- ✅ 总体执行时间增加但获得保护

---

## 第五步: AI 功能测试 🤖

### **A. AI 路径优化**

**功能测试:**
1. 进入 "Testing" → "功能测试"
2. 运行 "AI路径优化测试"
3. 查看测试结果

**预期输出:**
```json
{
  "optimizedPath": ["WETH", "USDC"],
  "improvement": "2.3%",
  "confidenceScore": 0.87,
  "gasOptimization": "15%"
}
```

### **B. 风险评估**

**风险分析测试:**
1. 运行 "风险评估测试"
2. 检查风险等级分类

**预期结果:**
- 风险等级: 低/中/高
- 波动性分数: 0-1 之间
- 具体风险建议

---

## 第六步: 跨链功能测试 🌉

### **跨链桥接测试**

**注意:** 跨链功能需要真实的桥接服务

**测试步骤:**
1. 选择目标链 (如以太坊主网)
2. 配置桥接参数:
   - 代币: WETH
   - 数量: 0.01
   - 接收地址: 你的地址
3. 估算桥接费用和时间

**验证要点:**
- ✅ 桥接费用估算合理
- ✅ 预估时间显示 (5-10分钟)
- ✅ 支持的桥接协议 (LayerZero/Axelar)

---

## 📊 性能基准测试

### **响应时间测试**
```bash
# 在浏览器开发者工具中监控:
交易执行:    < 10 秒
路径计算:    < 3 秒  
价格更新:    < 5 秒
AI 分析:     < 15 秒
```

### **准确性测试**
```bash
# 对比外部数据源验证:
价格偏差:    < 2%
滑点控制:    < 设定值
Gas 估算:    误差 < 20%
```

---

## 🛠️ 故障排查

### **常见问题及解决方案**

#### **1. 交易失败**
```bash
# 检查清单:
□ 钱包余额充足 (包括 Gas 费)
□ 代币授权已完成
□ 网络连接正常
□ Gas 限制设置合理
□ 滑点设置不过低
```

#### **2. 合约调用失败**
```bash
# 调试步骤:
1. 检查合约地址是否正确
2. 验证方法名称和参数
3. 确认网络匹配 (Monad 测试网)
4. 查看浏览器控制台错误
```

#### **3. 价格数据异常**
```bash
# 解决方法:
1. 手动刷新价格数据
2. 检查网络连接
3. 对比 CoinGecko 价格
4. 清除浏览器缓存
```

---

## ✅ 测试检查清单

### **基础功能验证**
- [ ] 钱包连接成功
- [ ] 网络切换到 Monad 测试网
- [ ] 所有合约验证通过
- [ ] 代币价格正常显示
- [ ] 余额信息准确

### **交易功能验证**  
- [ ] 市价单执行成功
- [ ] 限价单创建和管理
- [ ] 代币授权流程
- [ ] 交易确认和状态更新
- [ ] Gas 费用合理

### **高级功能验证**
- [ ] MEV 保护机制工作
- [ ] AI 路径优化有效
- [ ] 风险评估准确
- [ ] 跨链桥接估算
- [ ] 错误处理完善

### **用户体验验证**
- [ ] 界面响应迅速
- [ ] 加载状态清晰
- [ ] 错误提示友好
- [ ] 交易反馈及时

---

## 🎯 成功标准

### **功能完整性**
- ✅ 所有核心功能可用且稳定
- ✅ 错误处理机制完善
- ✅ 用户体验流畅直观

### **性能指标**
- ✅ 响应时间满足基准要求
- ✅ 交易成功率 > 95%
- ✅ Gas 效率优化良好

### **安全性**
- ✅ MEV 保护机制有效
- ✅ 用户资金安全保障
- ✅ 合约功能正常运行

---

## 📈 测试报告模板

```markdown
# RouteX 功能测试报告

## 测试环境
- 网络: Monad 测试网
- 钱包: MetaMask
- 测试时间: [日期]
- 测试账户: [地址]

## 测试结果
### 合约验证: ✅/❌
- TraderAgent: ✅
- RouterDefense: ✅
- 其他合约...

### 功能测试: ✅/❌
- 市价单: ✅ (执行时间: 8.5s)
- 限价单: ✅ (订单ID: ORDER_001)
- MEV保护: ✅ (两阶段执行)
- AI优化: ✅ (改进: 2.3%)

## 问题记录
[记录遇到的问题和解决方案]

## 建议改进
[提出优化建议]
```

通过这个完整的测试流程，您可以全面验证 RouteX 的核心功能是否正常工作！🚀